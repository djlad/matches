(this.webpackJsonpmatches=this.webpackJsonpmatches||[]).push([[0],Array(39).concat([function(e,t,s){e.exports=s.p+"static/media/back.3b7119c9.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){e.exports=s(271)},,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){var a={"./10_of_clubs.svg":91,"./10_of_diamonds.svg":92,"./10_of_hearts.svg":93,"./10_of_spades.svg":94,"./2_of_clubs.svg":95,"./2_of_diamonds.svg":96,"./2_of_hearts.svg":97,"./2_of_spades.svg":98,"./3_of_clubs.svg":99,"./3_of_diamonds.svg":100,"./3_of_hearts.svg":101,"./3_of_spades.svg":102,"./4_of_clubs.svg":103,"./4_of_diamonds.svg":104,"./4_of_hearts.svg":105,"./4_of_spades.svg":106,"./5_of_clubs.svg":107,"./5_of_diamonds.svg":108,"./5_of_hearts.svg":109,"./5_of_spades.svg":110,"./6_of_clubs.svg":111,"./6_of_diamonds.svg":112,"./6_of_hearts.svg":113,"./6_of_spades.svg":114,"./7_of_clubs.svg":115,"./7_of_diamonds.svg":116,"./7_of_hearts.svg":117,"./7_of_spades.svg":118,"./8_of_clubs.svg":119,"./8_of_diamonds.svg":120,"./8_of_hearts.svg":121,"./8_of_spades.svg":122,"./9_of_clubs.svg":123,"./9_of_diamonds.svg":124,"./9_of_hearts.svg":125,"./9_of_spades.svg":126,"./ace_of_clubs.svg":127,"./ace_of_diamonds.svg":128,"./ace_of_hearts.svg":129,"./ace_of_spades.svg":130,"./ace_of_spades2.svg":131,"./back.svg":39,"./black_joker.svg":132,"./jack_of_clubs.svg":133,"./jack_of_clubs2.svg":134,"./jack_of_diamonds.svg":135,"./jack_of_diamonds2.svg":136,"./jack_of_hearts.svg":137,"./jack_of_hearts2.svg":138,"./jack_of_spades.svg":139,"./jack_of_spades2.svg":140,"./king_of_clubs.svg":141,"./king_of_clubs2.svg":142,"./king_of_diamonds.svg":143,"./king_of_diamonds2.svg":144,"./king_of_hearts.svg":145,"./king_of_hearts2.svg":146,"./king_of_spades.svg":147,"./king_of_spades2.svg":148,"./queen_of_clubs.svg":149,"./queen_of_clubs2.svg":150,"./queen_of_diamonds.svg":151,"./queen_of_diamonds2.svg":152,"./queen_of_hearts.svg":153,"./queen_of_hearts2.svg":154,"./queen_of_spades.svg":155,"./queen_of_spades2.svg":156,"./red_joker.svg":157};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id=90},function(e,t,s){e.exports=s.p+"static/media/10_of_clubs.669c20fc.svg"},function(e,t,s){e.exports=s.p+"static/media/10_of_diamonds.dbb3850c.svg"},function(e,t,s){e.exports=s.p+"static/media/10_of_hearts.c6339410.svg"},function(e,t,s){e.exports=s.p+"static/media/10_of_spades.3963b09b.svg"},function(e,t,s){e.exports=s.p+"static/media/2_of_clubs.94b4a5b0.svg"},function(e,t,s){e.exports=s.p+"static/media/2_of_diamonds.eaef1133.svg"},function(e,t,s){e.exports=s.p+"static/media/2_of_hearts.1b2188a0.svg"},function(e,t,s){e.exports=s.p+"static/media/2_of_spades.b821dcd9.svg"},function(e,t,s){e.exports=s.p+"static/media/3_of_clubs.4281c3d1.svg"},function(e,t,s){e.exports=s.p+"static/media/3_of_diamonds.b9d5e12f.svg"},function(e,t,s){e.exports=s.p+"static/media/3_of_hearts.dfb7b9c5.svg"},function(e,t,s){e.exports=s.p+"static/media/3_of_spades.471f3e59.svg"},function(e,t,s){e.exports=s.p+"static/media/4_of_clubs.037d8c23.svg"},function(e,t,s){e.exports=s.p+"static/media/4_of_diamonds.72d20001.svg"},function(e,t,s){e.exports=s.p+"static/media/4_of_hearts.6369d1c9.svg"},function(e,t,s){e.exports=s.p+"static/media/4_of_spades.e1ae3152.svg"},function(e,t,s){e.exports=s.p+"static/media/5_of_clubs.12408f64.svg"},function(e,t,s){e.exports=s.p+"static/media/5_of_diamonds.eda01110.svg"},function(e,t,s){e.exports=s.p+"static/media/5_of_hearts.3a5059d0.svg"},function(e,t,s){e.exports=s.p+"static/media/5_of_spades.8f300fb5.svg"},function(e,t,s){e.exports=s.p+"static/media/6_of_clubs.3708c7e5.svg"},function(e,t,s){e.exports=s.p+"static/media/6_of_diamonds.a8aabd2d.svg"},function(e,t,s){e.exports=s.p+"static/media/6_of_hearts.13bea5a1.svg"},function(e,t,s){e.exports=s.p+"static/media/6_of_spades.dd29ca5a.svg"},function(e,t,s){e.exports=s.p+"static/media/7_of_clubs.768d16ac.svg"},function(e,t,s){e.exports=s.p+"static/media/7_of_diamonds.d00ed5bc.svg"},function(e,t,s){e.exports=s.p+"static/media/7_of_hearts.51aa35bf.svg"},function(e,t,s){e.exports=s.p+"static/media/7_of_spades.00b5eed0.svg"},function(e,t,s){e.exports=s.p+"static/media/8_of_clubs.55a0952d.svg"},function(e,t,s){e.exports=s.p+"static/media/8_of_diamonds.5f81e325.svg"},function(e,t,s){e.exports=s.p+"static/media/8_of_hearts.f6325833.svg"},function(e,t,s){e.exports=s.p+"static/media/8_of_spades.4ff481d5.svg"},function(e,t,s){e.exports=s.p+"static/media/9_of_clubs.cf6317bc.svg"},function(e,t,s){e.exports=s.p+"static/media/9_of_diamonds.a578d7b2.svg"},function(e,t,s){e.exports=s.p+"static/media/9_of_hearts.71f25336.svg"},function(e,t,s){e.exports=s.p+"static/media/9_of_spades.46304258.svg"},function(e,t,s){e.exports=s.p+"static/media/ace_of_clubs.9ee19a01.svg"},function(e,t,s){e.exports=s.p+"static/media/ace_of_diamonds.dd4d7167.svg"},function(e,t,s){e.exports=s.p+"static/media/ace_of_hearts.47428313.svg"},function(e,t,s){e.exports=s.p+"static/media/ace_of_spades.b9f81c2d.svg"},function(e,t,s){e.exports=s.p+"static/media/ace_of_spades2.223cd5d8.svg"},function(e,t,s){e.exports=s.p+"static/media/black_joker.7ce690e9.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_clubs.b02355d1.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_clubs2.56c4541c.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_diamonds.856386ef.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_diamonds2.c38f31dc.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_hearts.252a0b89.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_hearts2.02d4f21b.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_spades.91a4ffb4.svg"},function(e,t,s){e.exports=s.p+"static/media/jack_of_spades2.a1f0114e.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_clubs.e94802c7.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_clubs2.ff456a80.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_diamonds.9f9f91e2.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_diamonds2.658998b1.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_hearts.0f60db3e.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_hearts2.09112d05.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_spades.68cb8d2e.svg"},function(e,t,s){e.exports=s.p+"static/media/king_of_spades2.fe66fe03.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_clubs.fc3e13ab.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_clubs2.43122a93.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_diamonds.b8357abb.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_diamonds2.cdc326c0.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_hearts.7a78a2cb.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_hearts2.c439a881.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_spades.410715a5.svg"},function(e,t,s){e.exports=s.p+"static/media/queen_of_spades2.58d77ea5.svg"},function(e,t,s){e.exports=s.p+"static/media/red_joker.1ba0f353.svg"},function(e,t,s){},function(e,t,s){},,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},,,,,,,,function(e,t){},,function(e,t){},,,function(e,t,s){"use strict";s.r(t);var a,i=s(0),n=s.n(i),o=s(78),c=s.n(o),r=(s(87),s(88),s(6)),d=s(8),f=s(23),u=s(22);!function(e){e.hearts="hearts",e.spades="spades",e.clubs="clubs",e.diamonds="diamonds"}(a||(a={}));var p=s(39),l=s.n(p),_=(s(89),s(90)),v=_.keys().reduce((function(e,t){return e[t]=_(t),e}),{}),h=function(){function e(){Object(r.a)(this,e)}return Object(d.a)(e,[{key:"valueToFaceCard",value:function(e){switch(e){case 1:return"ace";case 11:return"jack";case 12:return"queen";case 13:return"king";default:return e.toString()}}},{key:"getImage",value:function(e,t){var s=[11,12,13].indexOf(e)>=0?"2":"",a="./"+this.valueToFaceCard(e)+"_of_"+t+s+".svg";return v[a]}}]),e}(),g=s(79),m=s.n(g),b=function(e){Object(f.a)(s,e);var t=Object(u.a)(s);function s(e,i){var n;return Object(r.a)(this,s),(n=t.call(this,e)).suit=a.spades,n.value=1,n.backSrc=l.a,n.cardImages=void 0,n.cardImages=new h,n}return Object(d.a)(s,[{key:"render",value:function(){var e=m()("flip-card",{"flip-it":this.props.cardState.faceUp});return n.a.createElement("div",{className:"card-container"},n.a.createElement("div",{className:e,onClick:this.props.cardState.removed?function(){}:this.props.onClick},n.a.createElement("div",{className:"flip-card-inner"},n.a.createElement("div",{className:"flip-card-front"},n.a.createElement("img",{src:this.backSrc,alt:"",className:"flip-card-img"})),n.a.createElement("div",{className:"flip-card-back"},n.a.createElement("img",{src:this.cardImages.getImage(this.props.cardState.value,this.props.cardState.suit),alt:"",className:"flip-card-img"})))))}}]),s}(n.a.Component),k=(s(158),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.spades,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(r.a)(this,e),this.value=1,this.suit=a.spades,this.faceUp=void 0,this.removed=void 0,this.value=t,this.suit=s,this.faceUp=i,this.removed=n}),y=function(){function e(t){Object(r.a)(this,e),this.players=[],this.turn=0,this.pickedCard=new k,this.wasPicked=!1,this.created=Date.now(),this.players=t}return Object(d.a)(e,[{key:"addPlayer",value:function(e){this.players.push(e),this.players.sort((function(e,t){return e.created-t.created}))}},{key:"pickCard",value:function(e){this.pickedCard=e,this.wasPicked=!0}},{key:"matchCard",value:function(e){return this.wasPicked?e.value===this.pickedCard.value&&e.suit!==this.pickedCard.suit?(this.wasPicked=!1,this.players[this.turn].score+=2,!0):(this.endTurn(),!1):(this.wasPicked=!1,this.endTurn(),!1)}},{key:"getCurrentTurnPlayer",value:function(){return this.players[this.turn]}},{key:"endTurn",value:function(){this.wasPicked=!1,this.turn=(this.turn+1)%this.players.length}}]),e}(),x=function(){function e(t){Object(r.a)(this,e),this.name="playerName",this.score=0,this.created=Date.now(),this.lastPickedCard=-1,this.name=t}return Object(d.a)(e,[{key:"equals",value:function(e){return this.name===e.name&&this.score===e.score&&this.created===e.created}}]),e}(),C=(s(159),function(e){Object(f.a)(s,e);var t=Object(u.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return n.a.createElement("div",{className:"scores"},this.props.players.map((function(e){return n.a.createElement("h5",{className:"score",key:e.created},e.name,": ",e.score)})))}}]),s}(n.a.Component)),j=s(80),S=function e(t){Object(r.a)(this,e),this.baseTopic=void 0,this.joinGame=void 0,this.oldPlayers=void 0,this.pickCard=void 0,this.shuffle=void 0,this.baseTopic=t,this.joinGame=t+"/joinGame",this.oldPlayers=t+"/oldPlayers",this.pickCard=t+"/pickCard",this.shuffle=t+"/shuffle"},O=s(81),w=function(e){Object(f.a)(s,e);var t=Object(u.a)(s);function s(e){var i;Object(r.a)(this,s),(i=t.call(this,e)).cards=[],i.round=void 0,i.flippedCards=[-1,-1],i.player=void 0,i.incorrectFlip=!1,i.client=void 0,i.topic=void 0,i.handleNewPlayer=function(e,t){console.log("handle new player"),i.round.players=[i.player],i.client.publish(i.topic.oldPlayers,JSON.stringify(i.player))},i.handleOldPlayers=function(e,t){var s=JSON.parse(t),a=new x(s.name);a.created=s.created,a.score=s.score;for(var n=0;n<i.round.players.length;n++)if(i.round.players[n].equals(a))return;i.round.addPlayer(a),console.log("setting state"),i.setState({})},i.handlePickCard=function(e,t){var s=JSON.parse(t);i.player.equals(s)||i.pickCard(s.lastPickedCard,!0,s)},i.handleShuffle=function(e,t){var s=JSON.parse(t);i.setState({cardStates:s})},i.handleChangeName=function(){var e;i.player.name=null!==(e=prompt("What is your name?"))&&void 0!==e?e:"Daniel",i.client.publish(i.topic.joinGame,JSON.stringify(i.player)),i.client.publish(i.topic.oldPlayers,JSON.stringify(i.player)),i.setState({})},i.shuffle=function(){i.state.cardStates.sort((function(){return Math.random()-.5})),i.setState({cardStates:i.state.cardStates}),i.client.publish(i.topic.shuffle,JSON.stringify(i.state.cardStates))},i.player=new x("Daniel"),i.round=new y([i.player]),i.state={cards:i.cards,cardStates:[],playerTurn:0};for(var n=[a.spades,a.diamonds,a.clubs,a.hearts],o=1;o<=13;o++)for(var c in n)i.state.cardStates.push(new k(o,n[c],!1));i.topic=new S("matchesgame/1234");var d="ws://pairs.azurewebsites.net";return console.log("connecting to "+d),i.client=Object(j.connect)(d,{port:443}),i}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.connectMqtt(this.topic.baseTopic),this.client.publish(this.topic.joinGame,JSON.stringify(this.player))}},{key:"connectMqtt",value:function(e){var t=this;this.client.subscribe(this.topic.baseTopic),this.client.subscribe(this.topic.joinGame),this.client.subscribe(this.topic.oldPlayers),this.client.subscribe(this.topic.pickCard),this.client.subscribe(this.topic.shuffle),this.client.on("message",(function(e,s){switch(e){case t.topic.joinGame:t.handleNewPlayer(e,s.toString());break;case t.topic.oldPlayers:t.handleOldPlayers(e,s.toString());break;case t.topic.pickCard:t.handlePickCard(e,s.toString());break;case t.topic.shuffle:t.handleShuffle(e,s.toString())}}))}},{key:"getCardById",value:function(e){return this.state.cardStates[e]}},{key:"pickCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.player;console.log("picking card: "+e);var a=s;t&&this.player.created===a.created||(a.lastPickedCard=e,this.player.created===a.created&&this.client.publish(this.topic.pickCard,JSON.stringify(a)),this.incorrectFlip?(this.flipCard(this.flippedCards[0]),this.flipCard(this.flippedCards[1]),this.incorrectFlip=!1):this.round.wasPicked?(this.flipCard(e),this.round.matchCard(this.getCardById(e))?(this.getCardById(e).removed=!0,this.getCardById(this.flippedCards[0]).removed=!0):(this.incorrectFlip=!0,this.flippedCards[1]=e)):(this.flippedCards[0]=e,this.flipCard(e),this.round.pickCard(this.getCardById(e))),this.round.turn!==this.state.playerTurn&&this.setState({playerTurn:this.round.turn}))}},{key:"flipCard",value:function(e){var t=!this.state.cardStates[e].faceUp;this.state.cardStates[e].faceUp=t,this.setState({cardStates:this.state.cardStates})}},{key:"render",value:function(){for(var e,t,s,a=this,i=function(e){a.state.cards[e]=n.a.createElement(b,{key:e,cardState:a.state.cardStates[e],onClick:function(){a.pickCard(e)}})},o=0;o<this.state.cardStates.length;o++)i(o);return n.a.createElement("div",null,n.a.createElement("div",{className:"player-name-display"},n.a.createElement("h3",{className:"lefters"},null===(e=this.round.getCurrentTurnPlayer())||void 0===e?void 0:e.name," ",(null===(t=this.round.getCurrentTurnPlayer())||void 0===t?void 0:t.created)===(null===(s=this.player)||void 0===s?void 0:s.created)?"(you)":""),n.a.createElement(O.a,{className:"edit-button",onClick:this.handleChangeName},"Change Name")),n.a.createElement(C,{players:this.round.players}),n.a.createElement("button",{onClick:this.shuffle},"Shuffle"),n.a.createElement("div",{className:"card-table"},this.state.cards))}}]),s}(n.a.Component);var N=function(){return console.log("version: 0.2"),n.a.createElement("div",{className:"App"},n.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[82,1,2]]]);
//# sourceMappingURL=main.454c326c.chunk.js.map